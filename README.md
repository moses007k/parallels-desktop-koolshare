虚拟机parallels desktop 安装koolshare软路由
===
可实现通过mac虚拟机搭建的软路由，为局域网内的机器通过宿主机实现软路由效果。
---

## 一、准备工具：
##### 1.parallels desktop；
##### 2.[koolshare固件](http://firmware.koolshare.cn/LEDE_X64_fw867/ "悬停显示")  ；
##### 3.[一些关键插件的离线安装包](https://590m.com/file/845023-376181875 "悬停显示") ；

## 二、开始安装：
##### 1.下载koolshare固件（后缀为.gz）；解压到文件夹，重命名为3.hdd；下载关键插件的离线安装包，后缀为.gz。
##### 2.parallels中新建→安装windows或者其他操作系统→手动选择→没有指定源也继续→更多Linux→其他Linux→随便命名，勾选安装前设定后点击创建→选项中的启动和关机中选择‘始终在后台准备就绪’→硬件选项卡中：CPU和内存可以根据自己需求设置；删除打印机、音频和摄像头、硬盘、CD/DVD；网络选择'wifi'；增加硬盘，选择现有镜像，位置选择之前解压好的3.hdd文件，转换格式后确定→关闭配置并安装。
##### 3.输入命令：  cd /etc/config → vi network → 将IP地址改为路由器内的地址（若mac的ip为192.168.1.100，可以将宿主机改为192.168.1.188），退出编译器并重启。
##### 4.浏览器登陆宿主机地址（如192.168.1.188），输入初始密码koolshare。
##### 5.koolshare界面中选择网络-接口，编辑LAN接口，注意check或添加如下几点：①协议：静态地址；②IPV4地址是更改的内网段宿主机地址（如192.168.1.188）；③IPV4网关应该是内网网关，如192.168.1.1；④DNS服务器添加一个内网网关，如192.168.1.1；⑤DHCP服务器的基本设置中，忽略此接口勾选中；⑥启动WAN接口，基本设置的协议应为DHCP客户端，物理接口应为eth1。
##### 6.测试网络是否畅通：在网络-诊断中，用ping命令ping通即为成功。
##### 7.在酷软中，离线安装.gz的插件离线安装包。
#### 自此虚机的软路由安装全部结束，注意虚机要一直在后台运行，mac电源的电源设置要改为永不休眠。
#### 最后，如果需要通过宿主机上网，可以将链接内网的设备改为手动，将网关设置为宿主机IP（如192.168.1.188）即可。




